(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();class l{constructor(){this.p1Life=20,this.p2Life=20,this.startLife=20,this.history=[],this.p1Color=this.randomColor(),this.p2Color=this.randomColor(this.p1Color),this.p1Change=0,this.p2Change=0,this.changeTimeoutP1=null,this.changeTimeoutP2=null,this.historyBufferP1=0,this.historyBufferP2=0,this.historyTimeoutP1=null,this.historyTimeoutP2=null}randomColor(e=null){let s;do s=Math.floor(Math.random()*360);while(e!==null&&Math.abs(s-e)<40);return`hsl(${s}, 70%, 50%)`}updateLife(e,s){e===1?(this.p1Life+=s,this.p1Change+=s,this.historyBufferP1+=s,this.showChange(1),this.scheduleHistory(1)):(this.p2Life+=s,this.p2Change+=s,this.historyBufferP2+=s,this.showChange(2),this.scheduleHistory(2)),this.render()}scheduleHistory(e){const s=`historyTimeoutP${e}`,i=`historyBufferP${e}`;this[s]&&clearTimeout(this[s]),this[s]=setTimeout(()=>{const t=this[i];t!==0&&(this.history.push({player:e,amount:t,newLife:e===1?this.p1Life:this.p2Life,timestamp:new Date().toLocaleTimeString()}),this[i]=0,this.render())},2e3)}showChange(e){const s=document.getElementById(`p${e}-change`),i=e===1?this.p1Change:this.p2Change;s.textContent=(i>0?"+":"")+i,s.classList.add("show");const t=`changeTimeoutP${e}`;this[t]&&clearTimeout(this[t]),this[t]=setTimeout(()=>{s.classList.remove("show"),e===1?this.p1Change=0:this.p2Change=0},3e3)}reset(){this.p1Life=this.startLife,this.p2Life=this.startLife,this.history=[],this.p1Change=0,this.p2Change=0,this.render()}setStartLife(e){this.startLife=parseInt(e),this.reset()}render(){document.getElementById("p1-life").textContent=this.p1Life,document.getElementById("p2-life").textContent=this.p2Life;const e=document.documentElement;e.style.setProperty("--p1-color",this.p1Color),e.style.setProperty("--p2-color",this.p2Color);const s=document.getElementById("history-list");s.innerHTML=this.history.slice().reverse().map(i=>`
            <div class="history-entry">
                <span class="history-p${i.player}">Player ${i.player}</span>
                <span>${i.amount>0?"+":""}${i.amount}</span>
                <span>${i.newLife} HP</span>
                <span style="opacity: 0.5">${i.timestamp}</span>
            </div>
        `).join("")}}const a=new l;document.querySelectorAll(".adjust-btn").forEach(o=>{o.addEventListener("click",e=>{const s=parseInt(o.dataset.player),i=parseInt(o.dataset.amount);a.updateLife(s,i);const t=document.getElementById(`p${s}-life`);t.classList.remove("pop"),t.offsetWidth,t.classList.add("pop")})});const n={history:document.getElementById("history-modal"),settings:document.getElementById("settings-modal"),reset:document.getElementById("reset-modal")};document.getElementById("history-btn").addEventListener("click",()=>{n.history.classList.add("active")});document.getElementById("settings-btn").addEventListener("click",()=>{n.settings.classList.add("active")});document.getElementById("reset-btn").addEventListener("click",()=>{n.reset.classList.add("active")});document.getElementById("confirm-reset").addEventListener("click",()=>{a.reset(),n.reset.classList.remove("active")});document.getElementById("cancel-reset").addEventListener("click",()=>{n.reset.classList.remove("active")});document.querySelectorAll(".close-modal").forEach(o=>{o.addEventListener("click",()=>{Object.values(n).forEach(e=>e.classList.remove("active"))})});window.addEventListener("click",o=>{Object.values(n).forEach(e=>{o.target===e&&e.classList.remove("active")})});document.querySelectorAll(".start-life-btn").forEach(o=>{o.addEventListener("click",()=>{document.querySelectorAll(".start-life-btn").forEach(e=>e.classList.remove("active")),o.classList.add("active"),a.setStartLife(o.dataset.value)})});document.getElementById("custom-life").addEventListener("change",o=>{a.setStartLife(o.target.value)});a.render();
